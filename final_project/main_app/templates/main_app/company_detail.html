{% extends "base.html" %}
{% load static %}
{% block javascript %}
    <script src="{% static "js/company_details.js" %}" defer></script>
{% endblock %}

{% block title %}{{ company.symbol }}{% endblock %}

{% block content %}
    <section class="details-section">
        <div class="company-label">
            <h2>{{ company.name }} ({{ company.symbol }})</h2>
            <p>{{ company.exchange.symbol }}</p>
        </div>

        <div class="center-section">
            <div class="btn-box">
                <button class="tab-btn active" data-id="about">About</button>
                <button class="tab-btn" data-id="income-statement">Income Statement</button>
                <button class="tab-btn" data-id="balance-sheet">Balance Sheet</button>
                <button class="tab-btn" data-id="cash-flow-statement">Cash Flow Statement</button>
            </div>

            <div class="detail-box">
                <div class="details active" id="about">
                    <p><b>Country:</b> {{ company.country }}</p>
                    <p><b>Sector:</b> {{ company.sector.name }}</p>
                    <p><b>Description:</b> {{ company.description }}</p>
                    <p><b>Market cap:</b> {{ market_cap.0 }}</p>
                    <p><b>Official website:</b> {{ company.website }}</p>
                </div>

                <div class="details financial-statement" id="income-statement">
                    <table>
                        {% for dict in income_statement_dicts %}
                            {% for field_name, values in dict.items %}
                                <tr>
                                    <th>{{ field_name }}</th>
                                    {% for value in values %}
                                        <td>{{ value }}</td>
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                        {% endfor %}
                    </table>
                </div>

                <div class="details financial-statement" id="balance-sheet">
                    <table>
                        {% for dict in balance_sheet_dicts %}
                            {% for field_name, values in dict.items %}
                                <tr>
                                    <th>{{ field_name }}</th>
                                    {% for value in values %}
                                        <td>{{ value }}</td>
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                        {% endfor %}
                    </table>
                </div>

                <div class="details financial-statement" id="cash-flow-statement">
                    <table>
                        {% for dict in cash_flow_statement_dicts %}
                            {% for field_name, values in dict.items %}
                                <tr>
                                    <th>{{ field_name }}</th>
                                    {% for value in values %}
                                        <td>{{ value }}</td>
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                        {% endfor %}
                    </table>
                </div>
            </div>
        </div>
    </section>
{% endblock %}